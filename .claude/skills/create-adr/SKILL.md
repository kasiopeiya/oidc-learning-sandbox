---
name: create-adr
description: ADR（Architecture Decision Record）を作成、またはADR対象かどうかを判定する。技術的・アーキテクチャ的な意思決定の文書化を依頼されたとき、またはADRの要否確認を依頼されたときに使用すること。
---

# ADR 作成スキル

## フロー

1. ADR対象かどうかを判定する（下記「判定基準」参照）
2. 対象外の場合：理由を説明し、それでも作成するか確認する
3. 情報収集：必要情報をユーザーから収集する（不足分のみ質問する）
4. 自動採番：`docs/adr/` の既存ファイルを確認し、最大番号+1を使用
5. ファイル作成：`docs/adr/NNN-slug.md`（テンプレート: `docs/adr/adr-template.md` を参照）

## ADR判定基準

**対象（いずれかを満たす場合）**:

- 技術スタック・フレームワーク・言語・ライブラリの選択
- アーキテクチャパターンの選択（構成方針、分割戦略等）
- インフラ設計の重要な決定
- 複数の代替案があり、後から変更が困難または高コストな決定
- セキュリティアプローチの選択

**対象外**:

- 単純な設定値の調整（メモリサイズ、タイムアウト等）
- 実装詳細・コーディングスタイル
- バグ修正
- 既存ADRが存在する決定の再文書化

判定が難しい場合は対象として扱う。

## ファイル作成ルール

- 保存先: `docs/adr/NNN-slug.md`
  - NNN: ゼロ埋め3桁（例: 007）
  - slug: タイトルから生成した英語スラッグ（例: `single-stack`）
- テンプレート: `docs/adr/adr-template.md` を参照すること
- ステータスは必ず **提案** にする
- 日付: 今日の日付（YYYY-MM-DD）

## 収集する情報

必要な情報が不足している場合はユーザーに質問する：

| 項目         | 内容                                   |
| ------------ | -------------------------------------- |
| 決定内容     | 何を選択したか                         |
| コンテキスト | 問題の背景、検討した選択肢             |
| 採用理由     | なぜこの選択をしたか                   |
| トレードオフ | 受け入れる制約・リスク、否定した選択肢 |
| 影響         | この決定が与える影響                   |
| 参照         | 関連ドキュメント・実装ファイル（任意） |
