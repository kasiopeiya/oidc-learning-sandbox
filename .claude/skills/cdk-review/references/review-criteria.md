# CDK レビュー観点（19項目・57点満点）

各観点を **3点満点** でスコアリングする。

## TypeScript 共通観点（10項目・30点）

| #   | 観点                       | チェック内容                                                                                                              |
| --- | -------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| 1   | **型安全性**               | `any` の使用、型アサーション、型推論の活用                                                                                |
| 2   | **命名規則・変数名の妥当性** | 変数名・関数名のキャメルケース、Construct IDのパスカルケース。利用目的や用途が名前から想像できるか（❌ `mainFunc` ⭕ `accountFunc`） |
| 3   | **単一責任**               | Construct の責務が明確か                                                                                                  |
| 4   | **重複コード**             | DRY 原則の遵守                                                                                                            |
| 5   | **コメント**               | WHY コメント・日本語コメントの存在                                                                                        |
| 6   | **エラーハンドリング**     | 適切なエラー処理                                                                                                          |
| 7   | **セキュリティ**           | ハードコード・環境変数の適切な扱い                                                                                        |
| 8   | **Import 順序**            | 標準ライブラリ → サードパーティ（CDK含む）→ 自作モジュール                                                                |
| 9   | **未使用のインスタンス変数** | `private readonly` などで宣言されているがコード内で参照されていないフィールドがないか                                    |
| 10  | **未使用の引数**           | コンストラクタや関数の引数（props含む）で一度も参照されていないものがないか                                               |

## CDK 固有観点（9項目・27点）

| #   | 観点                     | チェック内容                                                        |
| --- | ------------------------ | ------------------------------------------------------------------- |
| 9   | **宣言的記述**           | if 等の制御構文の多用を避ける                                       |
| 10  | **L2 Construct 優先**    | L1 使用時は理由がコメントで記載されているか                         |
| 11  | **Import 形式統一**      | `aws_* as service` 形式を使用しているか                             |
| 12  | **IAM 自動生成活用**     | `grant*` メソッド活用・明示的 Role 定義を避ける                     |
| 13  | **リソース名自動生成**   | 不必要なリソース名指定をしていないか                                |
| 14  | **RemovalPolicy 明示**   | Stateful リソースに適切に設定されているか                           |
| 15  | **Construct ID 規則**    | 自作 Construct 内のメインリソース ID が `Resource` または `Default` |
| 16  | **スタック分割の適切さ** | デプロイ単位として適切に分割されているか                            |
| 17  | **循環参照の検出**       | リソース間の依存関係に循環がないか                                  |

## スコア基準

| 点数 | 基準                               |
| ---- | ---------------------------------- |
| 3点  | 問題なし・ベストプラクティス準拠   |
| 2点  | 軽微な問題あり・改善余地あり       |
| 1点  | 明確な問題あり・要改善             |
| 0点  | 重大な問題あり・要リファクタリング |

## スコア対象外の追加チェック（確認点として報告）

スコアには含めないが、レビュー時に必ず確認し「確認点」セクションとして報告する。

| #   | 観点                   | チェック内容                                                                                      |
| --- | ---------------------- | ------------------------------------------------------------------------------------------------- |
| A   | **設定値の妥当性**     | ログ保存期間・タイムアウト・リトライ回数・メモリサイズなどの設定値が要件・コスト面で適切か        |
| B   | **RemovalPolicy の影響** | `DESTROY` や `RETAIN` の選択がデータ保護の観点から適切か（意図しないデータ削除・残留のリスク）  |

## 総合レベル判定

| スコア   | レベル             |
| -------- | ------------------ |
| 51点以上 | 優秀               |
| 41〜50点 | 良好               |
| 31〜40点 | 要改善             |
| 31点未満 | 要リファクタリング |
